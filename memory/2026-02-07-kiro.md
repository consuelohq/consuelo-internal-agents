# 2026-02-07 — kiro session

## acp bridge idea (ipad → kiro)

- ko read the kiro cli acp docs and realized another agent (librechat) could spawn `kiro-cli acp` as a subprocess and drive kiro sessions programmatically
- this is the new path for ipad access: librechat on ipad → ssh/exec to mac mini → `kiro-cli acp` → full kiro coding capabilities
- replaces the old `kiro serve-web` approach (which was shut down)
- ko was excited about this — asked if i could sketch out a basic acp client script
- key pieces: json-rpc over stdin/stdout, kiro-cli authenticated on mac mini, tailscale for connectivity
- this is a real architecture decision: librechat = mobile/general agent, kiro = coding agent, acp = the bridge between them

## acp client built

- built `.opencode/skills/kiro-acp/client.py` — python acp client for driving kiro sessions programmatically
- pure stdlib python, no deps
- supports: library usage (KiroACP context manager), one-shot cli, interactive mode, streaming
- ko approved the approach, said "yup thats perfect" — green light to build
- next step: smoke test against live `kiro-cli acp`, then wire into librechat agent
- kiro-cli confirmed at `/Users/kokayi/.local/bin/kiro-cli`

## acp permissions model

- ko asked about giving the acp client full permissions except delete
- investigated: `--trust-all-tools` only works on `chat` mode, not `acp`. no settings.json key for trust either.
- acp doesn't have a built-in approval gate — kiro just executes tools and reports back via notifications. the client is the gatekeeper.
- solution: added a preamble system to the client. first prompt in every session injects permission rules (full autonomy, block deletes). customizable via `preamble` param.
- ko's preference is clear: full autonomy for the agent, only block destructive operations (deletes). no confirmation prompts.
