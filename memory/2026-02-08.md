# 2026-02-08

## librechat recovery session (kiro)

- docker was in a bad state — ghost process (pid 1133, com.docke) holding port 3210 but not actually running
- docker cli commands were all hanging/timing out
- ko restarted the mac mini to clear it
- after reboot: docker came back up, all containers healthy (librechat, nginx, mongodb, meilisearch)
- kiro-proxy (port 18794) wasn't running after reboot — installed via launchd: `bash /Users/kokayi/Dev/claude-agent-workflow/kiro-proxy/install-launchd.sh`
  - correct path: `/Users/kokayi/Dev/claude-agent-workflow/kiro-proxy/` (NOT `.openclaw/workspace/kiro-proxy/`)
  - launchd plist: `com.consuelo.kiro-proxy` → auto-starts on login now
- tailscale serve was pointing to port 18789 (old/unknown service), not librechat
  - reset tailscale serve config
  - set to proxy port 3210 (librechat): `tailscale serve --bg 3210`
  - librechat now available at: `https://picassos-mac-mini.tail38ed59.ts.net/`
  - note: funnel on port 8847 was also reset — unknown what it was for
- `/api/suelo-status` endpoint confirmed working through nginx at `/suelo-api/api/suelo-status` (200 OK)
- sidebar panels (skills, tools, memory, cron) should now load data

## service recovery command updated

- ko has a master restart command that kickstarts all launchd services + docker compose
- added kiro-proxy to it: `launchctl kickstart -k gui/501/com.consuelo.kiro-proxy`
- added health check: `curl -s http://localhost:18794/health`
- full service list in the command:
  - ai.openclaw.gateway (18789)
  - com.openclaw-proxy.librechat (18793)
  - com.opencode-proxy.librechat (18791)
  - com.opencode.tailscale
  - com.charlotte-openclaw (3211)
  - com.consuelo.kiro-proxy (18794) ← NEW
  - docker compose for librechat (3210)

## tailscale serve config — librechat on separate port

- `com.opencode.tailscale` launchd service auto-registers openclaw gateway (18789) on default tailscale serve (port 443)
- when i did `tailscale serve reset` + set to 3210 earlier, the restart command's `launchctl kickstart -k gui/501/com.opencode.tailscale` overwrote it back to 18789
- solution: put librechat on a separate tailscale port (8443) so they don't conflict
- final tailscale serve config:
  - `https://picassos-mac-mini.tail38ed59.ts.net/` → openclaw gateway (18789)
  - `https://picassos-mac-mini.tail38ed59.ts.net:8443/` → librechat (3210)
- lesson: don't touch the default 443 route — it's managed by com.opencode.tailscale launchd service
